<html>
<head>
    <title>4c1d</title>
    <!-- Add viewport meta tag -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        /* Existing styles remain unchanged */
        
        /* Mobile-responsive styles */
        @media screen and (max-width: 600px) {
            body {
                margin: 15px;
            }
            
            form {
                flex-direction: column;
                gap: 15px;
                margin-bottom: 30px;
            }
            
            .input-group {
                width: 100%;
                gap: 5px;
            }
            
            #reverseBtn {
                writing-mode: horizontal-tb;
                transform: none;
                margin: 0 0 5px 0;
                padding: 5px;
                font-size: 11px;
            }
            
            input {
                width: 100%;
                padding: 10px;
                font-size: 14px;
            }
            
            button[type="submit"] {
                width: 100%;
                padding: 10px;
                font-size: 14px;
            }
            
            .instructions-dropdown {
                width: 100%;
                right: -15px;
                box-sizing: border-box;
            }
            
            .results {
                margin: 40px 0 20px 0;
            }
        }
    </style>
</head>
<!-- Rest of your existing HTML remains unchanged -->
<body>
    <form onsubmit="return searchWords(event)">
        <div class="input-group">
            <button type="button" id="reverseBtn" onclick="reversePattern()">reverse</button>
            <input type="text" id="patterns">
        </div>
        <button type="submit">search</button>
        <div class="header-title" onclick="toggleInstructions()">substring concordance
    <div class="instructions-dropdown">
        <div style="padding: 0px;">
            <p style="margin: 0 0 0 0;">find words with lil palindromes nested in them.
			like <em>lil</em> in lilac & lilly, or <em>eve</em> in never & level.<br><br>
			asterisks (*) are used as wild cards. <em>e*e</em> will return words like were, these, 
			ever.<br><br>
			parenthesis are used to limit word length, <em>(e**e)</em> will return only words that are 4 characters in length.<br><br>
			
			the reverse button to the left of the text input field reverses the input.
			<br><br>
			have fun! :)
            </ul>
        </div>
    </div>
</div>
    </form>
    <div id="results"></div>

    <script src="words.js"></script>
    
    <script>
    function toggleInstructions() {
        const title = document.querySelector('.header-title');
        title.classList.toggle('expanded');
    }
    // Function to reverse pattern
    function reversePattern() {
        const input = document.getElementById('patterns');
        const patterns = input.value.split(',').map(p => p.trim());
        
        const reversedPatterns = patterns.map(pattern => {
            const parenthesesCount = (pattern.match(/[()]/g) || []).length;
            
            if (parenthesesCount === 2) {
                return '(' + pattern.slice(1, -1).split('').reverse().join('') + ')';
            }
            else if (pattern.startsWith('(')) {
                return pattern.slice(1).split('').reverse().join('') + ')';
            }
            else if (pattern.endsWith(')')) {
                return '(' + pattern.slice(0, -1).split('').reverse().join('');
            }
            else {
                return pattern.split('').reverse().join('');
            }
        });
        
        input.value = reversedPatterns.join(', ');
        searchWords(new Event('submit'));
    }

    // Search function
    function searchWords(event) {
        event.preventDefault();
        const input = document.getElementById('patterns');
        const patterns = input.value
            .split(',')
            .map(p => p.trim())
            .filter(p => p.length > 0);

        const results = {};
        
        window.wordList.forEach(word => {
            const rawWord = word;
            const lowerWord = rawWord.toLowerCase();
            
            patterns.forEach(pattern => {
                let isMatch = false;
                let requiresExactLength = false;
                let targetPattern = pattern;
                let requiredLength = 0;

                if (pattern.startsWith('(') && pattern.endsWith(')')) {
                    requiresExactLength = true;
                    targetPattern = pattern.slice(1, -1);
                    requiredLength = targetPattern.length;
                }

                const processPattern = targetPattern.toLowerCase();
                
                if (processPattern.includes('*')) {
                    const regexStr = requiresExactLength 
                        ? `^${processPattern.replace(/\*/g, '[a-z]')}$`
                        : processPattern.replace(/\*/g, '[a-z]');
                    
                    const regex = new RegExp(regexStr, 'i');
                    isMatch = regex.test(rawWord);
                    
                    if (requiresExactLength) {
                        isMatch = isMatch && rawWord.length === requiredLength;
                    }
                } else {
                    isMatch = lowerWord.includes(processPattern);
                    if (requiresExactLength) {
                        isMatch = isMatch && rawWord.length === requiredLength;
                    }
                }

                if (isMatch) {
                    if (!results[pattern]) results[pattern] = [];
                    results[pattern].push(rawWord);
                }
            });
        });

        const resultsDiv = document.getElementById('results');
        resultsDiv.innerHTML = '';
        
        Object.entries(results).forEach(([pattern, words]) => {
            const html = `
            <div class="pattern">
                <h3>"${pattern}" (${words.length})</h3>
                <div>${words.join(', ')}</div>
            </div>`;
            resultsDiv.innerHTML += html;
        });
        input.blur()
        return false;
    }
    </script>
</body>
</html>